---
import Layout from "../../layouts/Layout.astro";
import Navbar from "../../components/navigation/Navbar";
import BikeDetailsView from "../../components/bikes/BikeDetailsView";

// userId is guaranteed to be set by middleware for protected routes
const userId = Astro.locals.userId as string;

const { bikeId } = Astro.params;

if (!bikeId) {
  return Astro.redirect("/bikes");
}
---

<Layout title="Bike Details - CycleGear" showHeader={false}>
  <Navbar client:load userId={userId} />
  <BikeDetailsView bikeId={bikeId} client:load />
</Layout>
